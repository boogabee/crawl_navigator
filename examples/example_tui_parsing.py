"""
Example usage of the DCSSLayoutParser to parse the 4 main TUI areas.

This demonstrates how to use the new structured TUI parser to identify
and extract the map, character panel, message log, and encounters areas.
"""

from tui_parser import DCSSLayoutParser

# Example DCSS screen text
example_screen = """
 ####### #.......# #..# #######.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ###  ...... ...   ....######## #.#   ....       #  # #### ...
 #.....# #.......# #...# #######.# ........# #.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####  
 #.....# #.......# #.....# #...# #.........# #...# ########.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.####+# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.@     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 #.....# #.......# #.....# #...# #.........# #...# #.# #.# #.# .......##.######.#### .......(..... ..###### ## #.########## #.#     ####...### ...    ...........##.#    ### ...... ...   ....######## #.#   ....       #  # ####
 g   goblin  Health: 20/20   Mana: 10/10  XL: 3  Exp: 45%
 h   hobgoblin  Time: 123                             Next Level: 1234567
_You see a goblin coming toward you!
_You hit the goblin. The goblin hits back!
"""

if __name__ == "__main__":
    parser = DCSSLayoutParser()
    areas = parser.parse_layout(example_screen)
    
    print("=" * 80)
    print("DCSS TUI LAYOUT PARSING EXAMPLE")
    print("=" * 80)
    
    if 'map' in areas:
        map_area = areas['map']
        print(f"\nüìç MAP AREA (Rows {map_area.top}-{map_area.bottom}, Cols {map_area.left}-{map_area.right})")
        print(f"   Dimensions: {map_area.width}√ó{map_area.height}")
        print(f"   Player position: {parser.find_player_position()}")
        print(f"   Creature symbols visible: {parser.find_creature_symbols_on_map()}")
    
    if 'character_panel' in areas:
        panel_area = areas['character_panel']
        print(f"\nüë§ CHARACTER PANEL (Rows {panel_area.top}-{panel_area.bottom}, Cols {panel_area.left}-{panel_area.right})")
        print(f"   Dimensions: {panel_area.width}√ó{panel_area.height}")
        print(f"   Content preview:")
        for line in panel_area.content[:5]:
            print(f"     {line}")
    
    if 'encounters' in areas:
        enc_area = areas['encounters']
        print(f"\n‚öîÔ∏è ENCOUNTERS AREA (Rows {enc_area.top}-{enc_area.bottom}, Cols {enc_area.left}-{enc_area.right})")
        print(f"   Content:")
        for line in enc_area.content:
            print(f"     {line}")
    
    if 'message_log' in areas:
        msg_area = areas['message_log']
        print(f"\nüí¨ MESSAGE LOG (Rows {msg_area.top}-{msg_area.bottom}, Cols {msg_area.left}-{msg_area.right})")
        print(f"   Content:")
        for line in msg_area.content:
            print(f"     {line}")
    
    print("\n" + "=" * 80)
